/*!
 * pledges.
 * https://www.github.com/ryansmith94/Pledges
 *
 * Copyright 2013, ryansmith94 and contributors.
 * Released under the MIT license.
 * https://github.com/ryansmith94/Pledges/blob/master/license.md
 *
 * Version 1372.9379.71663.
*/
!function(a){"use strict";var b=function(){var a=this,c="unfulfilled",d=null,e=null,f=[],g=[],h=function(a,b){setTimeout(function(){a(b)})};return a.state=function(){return c},a.fulfil=function(b){return"unfulfilled"===c&&(d=b,c="fulfilled",f.forEach(function(a){h(a,d),f.splice(f.indexOf(a),1)})),a},a.reject=function(b){return"unfulfilled"===c&&(e=b,c="rejected",g.forEach(function(a){h(a,e),g.splice(g.indexOf(a),1)})),a},a.then=function(a,i){var j=new b,k=function(a){return"function"!=typeof a?function(){}:function(b){try{j.fulfil(a(b))}catch(c){j.reject(c)}}};return a=k(a),i=k(i),"unfulfilled"===c?setTimeout(function(){f.push(a),g.push(i),"fulfilled"===c&&-1!==f.indexOf(a)?(a(d),f.splice(f.splice(a),1)):"rejected"===c&&-1!==g.indexOf(i)&&(i(e),g.splice(f.splice(i),1))}):"fulfilled"===c?h(a,d):"rejected"===c&&h(i,e),j},a.restrict=function(){return{state:a.state,then:a.then}},a};a.promise=function(){return new b}}(this);