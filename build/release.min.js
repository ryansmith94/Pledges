/*!
 * pledges.
 * https://www.github.com/ryansmith94/Pledges
 *
 * Copyright 2013, ryansmith94 and contributors.
 * Released under the MIT license.
 * https://github.com/ryansmith94/Pledges/blob/master/license.md
 *
 * Version 1.0.16.
*/
!function(a){"use strict";var b=function(){var a=this,c=0,d=null,e=[],f=[],g=function(b,e){return function(f){return 0===c&&(d=f,c=b,e.forEach(function(a,b){e.splice(b,1),a()})),a}};return a.state=function(){var a=["pending","fulfilled","rejected"];return function(){return a[c]}}(),a.fulfil=g(1,e),a.reject=g(2,f),a.then=function(a,g){var h=new b,i=function(a){throw a},j=function(a){return a},k=function(a,b){return"function"!=typeof a&&(a=b),function(){setTimeout(function(){try{h.fulfil(a(d))}catch(b){h.reject(b)}})}};return a=k(a,j),g=k(g,i),0===c?(e.push(a),f.push(g),1===c&&-1!==e.indexOf(a)?(e.splice(e.indexOf(a),1),a()):2===c&&-1!==f.indexOf(g)&&(f.splice(e.indexOf(g),1),g())):1===c?a():2===c&&g(),h.restrict()},a.restrict=function(){return{state:a.state,then:a.then}},a},c=function(){return new b};"function"==typeof a.define?a.define("promise",[],function(){return c}):a.promise=c}(this);